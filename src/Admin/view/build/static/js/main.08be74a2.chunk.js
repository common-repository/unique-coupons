(this["webpackJsonpunique-coupons-admin"]=this["webpackJsonpunique-coupons-admin"]||[]).push([[0],{218:function(e,t,n){"use strict";n.r(t);var r,a=n(2),c=n(0),o=n.n(c),i=n(14),u=n.n(i),s=n(29),p=n(23),d=n(293),l=n(287),j=n(13),b=n(21),h=n(222),f=n(279),O=n(126),g=n(262),x=n(161),m=n(18),v=n(8),y=n(273),w=n(85),_=n.n(w),C=n(156),I=n.n(C),k=n(157),A=n.n(k),S=n(17),G=n(53),B=n(259),q=n(263),M=Object(q.a)((function(e){return{extendedIcon:{marginRight:e.spacing(1)},progress:{position:"absolute",top:"50%",left:14,marginTop:-14}}})),R=function(e){var t=e.children,n=e.Icon,r=e.isLoading,c=Object(G.a)(e,["children","Icon","isLoading"]),o=M();return Object(a.jsxs)(B.a,Object(v.a)(Object(v.a)({color:"primary",variant:"extended",disabled:r},c),{},{children:[Object(a.jsx)(n,{className:o.extendedIcon}),t,r&&Object(a.jsx)(g.a,{size:28,className:o.progress})]}))},T=n(268),E=n(269),D=n(288),N=n(106),F=n.n(N),P=n(160),L=(n(188),n(192),n(194),n(196),n(198),n(200),n(202),n(204),n(206),n(208),n(210),n(212),"#666"),V='\n\t[class^="unique-coupons-popup__"] {\n\t\tposition: relative;\n\t\tborder: 1px dashed '.concat(L,';\n\t}\n\t.unique-coupons-popup__coupon {\n\t\tpadding-top: 0.5em;\n\t}\n\t[class^="unique-coupons-popup__"]::after {\n\t\tposition: absolute;\n\t\twidth: max-content;\n\t\ttop: 0;\n\t\tleft: 50%;\n\t\ttransform: translate(-50%, -75%);\n\t\tfont-size: 90%;\n\t\tcolor: ').concat(L,';\n\t\tbackground-color: white;\n\t\topacity: 0;\n\t\ttransition: opacity 0.2s;\n\t\tpadding: 2px 4px;\n\t\tborder-radius: 4px;\n\t\tbox-shadow: 2px 2px 4px;\n\t}\n\t[class^="unique-coupons-popup__"]:hover::after {\n\t\topacity: 1;\n\t}\n\t.unique-coupons-popup__button::after {\n\t\tcontent: "Action area";\n\t}\n\t.unique-coupons-popup__coupon::after {\n\t\tcontent: "Success area";\n\t}\n\t.unique-coupons-popup__value::after {\n\t\tcontent: "Coupon value";\n\t}\n\t.unique-coupons-popup__expires-at::after {\n\t\tcontent: "Expiry date";\n\t}\n'),z=function(e){var t=e.template,n=e.handleChange,r=Object(G.a)(e,["template","handleChange"]);return Object(a.jsx)(f.a,{marginY:2,children:Object(a.jsx)(P.a,Object(v.a)({init:{height:300,plugins:"paste link image template code autoresize help lists",toolbar:["undo redo | styleselect | bold italic | link image | alignleft aligncenter alignright alignjustify | outdent indent | code | help","actionButton successArea couponValue expiresAt"],content_style:V,branding:!1,formats:{successArea:{block:"div",classes:"unique-coupons-popup__coupon"},couponValue:{inline:"span",classes:"unique-coupons-popup__value"},expiresAt:{inline:"span",classes:"unique-coupons-popup__expires-at"},actionButton:{inline:"button",classes:"unique-coupons-popup__button"}},setup:function(e){e.ui.registry.addButton("couponValue",{text:"Coupon value",onAction:function(){return e.formatter.toggle("couponValue")}}),e.ui.registry.addButton("expiresAt",{text:"Expiry date",onAction:function(){return e.formatter.toggle("expiresAt")}}),e.ui.registry.addButton("successArea",{text:"Success area",onAction:function(){return e.formatter.toggle("successArea")}}),e.ui.registry.addButton("actionButton",{text:"Action button",onAction:function(){return e.formatter.toggle("actionButton")}})}},value:t,onEditorChange:function(e,t){return n(e)}},r))})},U=Object(q.a)((function(e){return{root:function(t){return{"& .MuiInput-input":Object(v.a)(Object(v.a)({},e.typography[t.variant]),{},{height:"unset","&::placeholder":{fontStyle:"italic"}}),marginRight:e.spacing(1),width:"100%"}}}})),H=function(e){var t=e.initialValues,n=e.handleSubmit,r=e.submitButtonText,o=e.isLoading,i=Object(c.useState)(t),u=Object(j.a)(i,2),s=u[0],p=u[1],d=s.name,l=s.description,b=s.template,h=s.isActive;return Object(a.jsxs)("div",{children:[Object(a.jsx)(f.a,{marginBottom:1.5,children:Object(a.jsx)(D.a,{value:d,onChange:function(e){return p(Object(v.a)(Object(v.a)({},s),{},{name:e.target.value}))},disabled:o,autoFocus:!0,placeholder:"Group Title",className:U({variant:"h3"}).root})}),Object(a.jsx)(f.a,{marginBottom:1.5,children:Object(a.jsx)(D.a,{value:l,onChange:function(e){return p(Object(v.a)(Object(v.a)({},s),{},{description:e.target.value}))},disabled:o,placeholder:"Group Description (optional)",className:U({variant:"subtitle1"}).root})}),Object(a.jsx)(T.a,{control:Object(a.jsx)(E.a,{checked:h,onChange:function(e){return p(Object(v.a)(Object(v.a)({},s),{},{isActive:e.target.checked}))}}),disabled:o,label:"Is active?"}),Object(a.jsx)(z,{template:b,handleChange:function(e){return p(Object(v.a)(Object(v.a)({},s),{},{template:e}))},disabled:o}),Object(a.jsx)(R,{Icon:F.a,isLoading:o,onClick:function(){return n(s)},children:r})]})},J=function(e){var t=e.isActive,n=e.handleChange;return Object(a.jsx)(T.a,{label:"Is active?",control:Object(a.jsx)(E.a,{checked:t,onChange:function(e){return n(e.target.checked)}})})},W=n(294),Q=n(12),Y=n.n(Q),X=n(27),K=n(100),Z=n(290),$=n(270),ee=n(285),te=n(280),ne=n(152),re=n(289),ae=window.UNIQUE_COUPONS.api,ce=new function e(){var t=this;Object(ne.a)(this,e),this.addGroup=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post(ae.group,t.transformGroupRequestBody(n));case 2:return r=e.sent,e.abrupt("return",t.transformGroupResponse(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.addCoupons=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r,a,c,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.couponValues,a=n.groupId,c=n.expiresAt,e.next=3,t.post(ae.coupons+"/create",t.transformAddCouponsRequestBody(a,r,c));case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getGroups=Object(X.a)(Y.a.mark((function e(){var n;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(ae.group,{orderby:"id",order:"desc",per_page:100});case 2:return n=e.sent,e.abrupt("return",t.transformGroupsResponse(n));case 4:case"end":return e.stop()}}),e)}))),this.getCoupons=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get(ae.coupons,{group_id:n});case 2:return r=e.sent,e.abrupt("return",t.transformGetCouponsResponse(r));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.editGroup=function(){var e=Object(X.a)(Y.a.mark((function e(n,r){var a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.post("".concat(ae.group,"/").concat(n),t.transformGroupRequestBody(r));case 2:return a=e.sent,e.abrupt("return",t.transformGroupResponse(a));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.deleteGroup=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.delete("".concat(ae.group,"/").concat(n),{force:!0});case 2:return a=e.sent,e.abrupt("return",null===a||void 0===a||null===(r=a.previous)||void 0===r?void 0:r.id);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.activateCoupons=function(){var e=Object(X.a)(Y.a.mark((function e(n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.post(ae.coupons+"/activate",{coupon_ids:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deactivateCoupons=function(){var e=Object(X.a)(Y.a.mark((function e(n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.post(ae.coupons+"/deactivate",{coupon_ids:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.deleteCoupons=function(){var e=Object(X.a)(Y.a.mark((function e(n){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.post(ae.coupons+"/delete",{coupon_ids:n}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getOptions=function(){return t.get(ae.options)},this.setOptions=function(e){return t.post(ae.options,e)},this.fetch=function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var r,a;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,Object(v.a)(Object(v.a)({},n),{},{credentials:"same-origin",headers:Object(v.a)(Object(v.a)({},n.headers),{},{"Content-Type":"application/json","X-WP-Nonce":ae.nonce})}));case 2:return r=e.sent,e.next=5,r.json();case 5:if(a=e.sent,r.ok){e.next=8;break}throw new Error(a.message);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.get=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r,a,c=arguments;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},a=function(e,t){var n=new URLSearchParams(t).toString(),r=e.includes("?")?"&":"?";return n?"".concat(e).concat(r).concat(n):e},e.abrupt("return",t.fetch(a(n,r),{method:"GET"}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.post=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r,a=arguments;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",t.fetch(n,{method:"POST",body:JSON.stringify(r)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.delete=function(){var e=Object(X.a)(Y.a.mark((function e(n){var r,a=arguments;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.abrupt("return",t.fetch(n,{method:"DELETE",body:JSON.stringify(r)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.transformGroupRequestBody=function(e){var t={};return"name"in e&&Object(re.a)(t,"name",e.name),"description"in e&&Object(re.a)(t,"description",e.description),"template"in e&&Object(re.a)(t,"meta.template",e.template),"isActive"in e&&Object(re.a)(t,"meta.is_active",e.isActive),t},this.transformGroupResponse=function(e){return{id:e.id,name:e.name,description:e.description,template:e.meta.template,isActive:e.meta.is_active,couponIds:[]}},this.transformGroupsResponse=function(e){return e.map(t.transformGroupResponse)},this.transformAddCouponsRequestBody=function(e,t,n){return{group_id:e,coupon_values:t,expires_at:n}},this.transformGetCouponsResponse=function(e){return e.map((function(e){return{id:e.id,value:e.value,expiresAt:e.expires_at,status:e.status,userId:e.user_id}}))}},oe=Object(S.b)("coupons/addGroup",ce.addGroup),ie=Object(S.b)("coupons/addCoupons",function(){var e=Object(X.a)(Y.a.mark((function e(t){var n,r,a,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.couponValues,r=t.expiresAt,a=t.groupId,e.next=3,ce.addCoupons({couponValues:n,expiresAt:r,groupId:a});case 3:return c=e.sent,e.abrupt("return",{groupId:a,coupons:Object(Z.a)(c,n,(function(e,t){return{id:e,value:t,expiresAt:r}}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ue=Object(S.b)("coupons/getGroups",ce.getGroups),se=Object(S.b)("coupons/getCoupons",function(){var e=Object(X.a)(Y.a.mark((function e(t){return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,ce.getCoupons(t);case 3:return e.t1=e.sent,e.abrupt("return",{groupId:e.t0,coupons:e.t1});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),pe=Object(S.b)("coupons/editGroup",function(){var e=Object(X.a)(Y.a.mark((function e(t,n){var r,a,c,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.groupId,a=Object(G.a)(t,["groupId"]),c=n.rejectWithValue,e.next=4,ce.editGroup(r,a);case 4:if(o=e.sent,Object($.a)(o,Object(v.a)({id:r},a))){e.next=7;break}return e.abrupt("return",c(o));case 7:return e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),de=Object(S.b)("coupons/deleteGroup",ce.deleteGroup),le={activate:Object(S.b)("coupons/activate",ce.activateCoupons),deactivate:Object(S.b)("coupons/deactivate",ce.deactivateCoupons),delete:Object(S.b)("coupons/delete",ce.deleteCoupons)},je=Object(S.c)(),be=Object(S.c)(),he={couponGroups:je.getInitialState(),coupons:be.getInitialState()},fe=Object(S.d)({name:"coupons",initialState:he,reducers:{},extraReducers:(r={},Object(m.a)(r,oe.fulfilled,(function(e,t){var n=t.payload;je.addOne(e.couponGroups,n)})),Object(m.a)(r,ie.fulfilled,(function(e,t){var n=t.payload;we(e,n.groupId,n.coupons)})),Object(m.a)(r,ue.fulfilled,(function(e,t){var n=t.payload;je.setAll(e.couponGroups,n)})),Object(m.a)(r,se.fulfilled,(function(e,t){var n=t.payload,r=n.groupId,a=n.coupons;!function(e,t){var n=e.couponGroups.entities[t].couponIds;je.updateOne(e.couponGroups,{id:t,changes:{couponIds:[]}}),be.removeMany(e.coupons,n)}(e,r),we(e,r,a)})),Object(m.a)(r,pe.pending,(function(e,t){var n=t.meta.arg,r=n.groupId,a=Object(G.a)(n,["groupId"]);je.updateOne(e.couponGroups,{id:r,changes:a})})),Object(m.a)(r,pe.fulfilled,(function(e,t){var n=t.payload,r=n.id,a=Object(G.a)(n,["id"]);je.updateOne(e.couponGroups,{id:r,changes:a})})),Object(m.a)(r,pe.rejected,(function(e,t){var n=t.payload;if(null===n||void 0===n?void 0:n.id){var r=n.id,a=Object(G.a)(n,["id"]);je.updateOne(e.couponGroups,{id:r,changes:a})}})),Object(m.a)(r,de.fulfilled,(function(e,t){var n=t.payload;je.removeOne(e.couponGroups,n)})),Object(m.a)(r,le.activate.fulfilled,(function(e,t){var n=t.meta.arg;be.updateMany(e.coupons,n.map((function(e){return{id:e,changes:{status:"active"}}})))})),Object(m.a)(r,le.deactivate.fulfilled,(function(e,t){var n=t.meta.arg;be.updateMany(e.coupons,n.map((function(e){return{id:e,changes:{status:"inactive"}}})))})),Object(m.a)(r,le.delete.fulfilled,(function(e,t){var n=t.meta.arg;be.removeMany(e.coupons,n)})),r)}),Oe=je.getSelectors((function(e){return e.coupons.couponGroups})),ge=Oe.selectById,xe=Oe.selectIds,me=be.getSelectors((function(e){return e.coupons.coupons})).selectById,ve=Object(K.a)((function(e){return e.coupons.coupons}),(function(e,t){return ge(e,t)}),(function(e,t){return Object(ee.a)(t.couponIds.map((function(t){return e.entities[t]})),"status")})),ye=fe.reducer;function we(e,t,n){!function(e,t,n){var r=Object(W.a)(n,"id"),a=e.couponGroups.entities[t].couponIds,c=Object(te.a)(a,r);je.updateOne(e.couponGroups,{id:t,changes:{couponIds:c}})}(e,t,n),be.addMany(e.coupons,n)}var _e=n(271),Ce=n(283),Ie=n(272),ke=n(286),Ae=Object(x.a)("div")({padding:"1em","&:not(:last-of-type)":{borderBottom:"1px solid #ccc"},"&:hover":{background:"#eee"}}),Se=function(){return Object(a.jsxs)(qe,{children:[Object(a.jsx)(g.a,{size:30,style:{marginRight:5}}),Object(a.jsx)(O.a,{children:"Updating entries"})]})},Ge=function(){return Object(a.jsx)(qe,{children:Object(a.jsx)(O.a,{children:"No entries"})})},Be={display:"flex",alignItems:"center",gap:"1em"},qe=Object(x.a)(Ae)(Be),Me=Object(x.a)("div")(Object(v.a)(Object(v.a)({},Be),{},{padding:"0.6em 1em",borderBottom:"1px solid #888"})),Re=Object(x.a)(ke.a)({margin:-10}),Te=function(e){var t=e.ids,n=e.Row,r=e.BulkActions,o=void 0===r?function(e){return null}:r,i=e.isFetching,u=void 0!==i&&i,s=Object(c.useState)([]),p=Object(j.a)(s,2),d=p[0],l=p[1],b=function(e){return d.includes(e)},f=function(){return t.length===d.length},O=function(){return 0===d.length},g=Object(a.jsxs)(Me,{children:[Object(a.jsx)(Re,{checked:f()&&!O(),indeterminate:!f()&&!O(),onChange:function(){return f()?l([]):l(t)}}),Object(a.jsx)(o,{ids:d})]}),x=0===t.length?Object(a.jsx)(Ge,{}):t.map((function(e){return Object(a.jsxs)(qe,{children:[Object(a.jsx)(Re,{checked:b(e),onChange:function(){return function(e){return l((function(t){return b(e)?t.filter((function(t){return t!==e})):t.concat(e)}))}(e)}}),Object(a.jsx)(n,{id:e})]},e)}));return Object(a.jsxs)(h.a,{square:!0,children:[u?Object(a.jsx)(Se,{}):null,g,x]})},Ee=n(223),De=n(282),Ne=n(297),Fe=n(266),Pe=n(155),Le=n.n(Pe),Ve=n(154),ze=n.n(Ve),Ue=n(136),He=n(26),Je=n(281),We=document.createElement("div"),Qe=document.createElement("div");Qe.setAttribute("id","app-root");var Ye=document.createComment("jss-insertion-point"),Xe=Object(He.b)(Object(v.a)(Object(v.a)({},Object(Je.a)()),{},{insertionPoint:Ye})),Ke=document.createElement("link");Ke.setAttribute("rel","stylesheet"),Ke.setAttribute("href","https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"),document.getElementById("unique-coupons-root").shadowRoot.appendChild(We),We.appendChild(Ke),We.appendChild(Ye),We.appendChild(Qe);var Ze=Object(x.a)("div")((function(e){return{display:"flex",justifyContent:"flex-end",alignItems:"center",padding:e.theme.spacing(1)}})),$e=function(e){return Object(a.jsx)(Ee.a,Object(v.a)(Object(v.a)({size:"small"},e),{},{children:Object(a.jsx)(ze.a,{})}))},et=function(e){return Object(a.jsx)(Ee.a,Object(v.a)(Object(v.a)({size:"small"},e),{},{children:Object(a.jsx)(Le.a,{})}))},tt=Object(x.a)(Fe.a)((function(e){var t=e.theme;return{display:"flex",alignItems:"center",marginLeft:t.spacing(2),gap:t.spacing(1)}})),nt=function(e){var t=e.items,n=e.initialPage,r=void 0===n?1:n,o=e.perPage,i=void 0===o?10:o,u=e.getComponent,s=Math.ceil(t.length/i)||1,p=function(e){return Object(Ue.clamp)(e,1,s)},d=Object(c.useState)(r),l=Object(j.a)(d,2),b=l[0],h=l[1],f=function(e){return h(p(e))};p(b)!==b&&f(b);var O=Object(Ue.range)(1,s+1),g=t.slice((b-1)*i,b*i),x=Object(a.jsx)(De.a,{value:b,onChange:function(e){return f(e.target.value)},label:"Page",MenuProps:{container:Qe},children:O.map((function(e){return Object(a.jsx)(Ne.a,{value:e,children:e},e)}))}),m=Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($e,{onClick:function(){return f(b-1)},disabled:p(b-1)===b}),Object(a.jsx)(et,{onClick:function(){return f(b+1)},disabled:p(b+1)===b})]}),v=Object(a.jsxs)(Ze,{children:[m,Object(a.jsxs)(tt,{children:["Page ",x," of ",s]})]});return Object(a.jsxs)(a.Fragment,{children:[u(g),v]})};function rt(e){var t=new Date;return t.setTime(1e3*e),t.toLocaleDateString(void 0,{day:"numeric",month:"long",year:"numeric"})}var at=function(e){var t=e.couponId,n=Object(p.c)((function(e){return me(e,t)})),r=n.value,c=n.expiresAt,o=n.userId;return Object(a.jsxs)(ct,{children:[Object(a.jsx)(O.a,{component:"b",children:r}),Object(a.jsx)(O.a,{children:rt(c)}),o?Object(a.jsxs)(O.a,{children:["User ID: ",o]}):null]})},ct=Object(x.a)("div")((function(e){return{display:"flex",width:"100%",textAlign:"center",gap:e.theme.spacing(2),"& > *":{minWidth:150}}})),ot={active:["deactivate","delete"],inactive:["activate","delete"],used:["delete"],expired:["delete"]},it=function(e){return function(t){var n=t.ids,r=0===n.length,c=Object(p.b)(),o=ot[e].map((function(e){var t=le[e];return Object(a.jsx)(y.a,{onClick:function(){return c(t(n))},disabled:r,size:"small",children:e})}));return Object(a.jsx)(a.Fragment,{children:o})}},ut=function(e){var t=e.groupId,n=e.isFetching,r=Object(c.useState)("active"),o=Object(j.a)(r,2),i=o[0],u=o[1],s=Object(p.c)((function(e){return ve(e,t)})),d=Object(W.a)(s[i],"id");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_e.a,{position:"static",color:"default",children:Object(a.jsxs)(Ce.a,{value:i,onChange:function(e,t){return u(t)},children:[Object(a.jsx)(Ie.a,{value:"active",label:"Active"}),Object(a.jsx)(Ie.a,{value:"inactive",label:"Inactive"}),Object(a.jsx)(Ie.a,{value:"used",label:"Used"}),Object(a.jsx)(Ie.a,{value:"expired",label:"Expired"})]})}),Object(a.jsx)(nt,{items:d,perPage:12,getComponent:function(e){return Object(a.jsx)(Te,{ids:e,Row:function(e){var t=e.id;return Object(a.jsx)(at,{couponId:t})},BulkActions:it(i),isFetching:n},e)}},i)]})},st=Object(x.a)(O.a)({padding:"7px 0 8px"}),pt=Object(x.a)("div")((function(e){var t=e.theme;return Object(m.a)({},t.breakpoints.up("sm"),{display:"flex",alignItems:"center"})})),dt=Object(x.a)("div")({flexGrow:1}),lt=Object(x.a)("div")((function(e){return{display:"flex",flexDirection:"column",alignItems:"flex-end",gap:e.theme.spacing(2)}})),jt=function(e){var t=e.groupId,n=Object(p.c)((function(e){return ge(e,t)})),r=void 0!==n,i=Object(c.useState)(!0),u=Object(j.a)(i,2),d=u[0],l=u[1],b=Object(c.useState)(!1),h=Object(j.a)(b,2),f=h[0],g=h[1],x=Object(c.useState)(!1),m=Object(j.a)(x,2),w=m[0],C=m[1],k=Object(c.useState)(""),G=Object(j.a)(k,2)[1],B=Object(p.b)();if(o.a.useEffect((function(){r&&B(se(t)).then(S.e).then((function(){return l(!1)})).catch((function(e){var t=e.message;return G(t)}))}),[B,r,t]),!r)return Object(a.jsxs)(O.a,{variant:"body1",children:["There is no group with ID ",t]});var q=n.name,M=n.description,T=n.template,E=n.isActive;return f?Object(a.jsx)(H,{initialValues:n,handleSubmit:function(e){C(!0),B(pe(Object(v.a)({groupId:t},e))).then((function(){g(!1),C(!1)}))},submitButtonText:"Save changes",isLoading:w}):Object(a.jsxs)("div",{children:[Object(a.jsxs)(pt,{children:[Object(a.jsxs)(dt,{children:[Object(a.jsx)(st,{variant:"h3",children:q}),M&&Object(a.jsx)(st,{variant:"subtitle1",children:M}),Object(a.jsx)(J,{isActive:E,handleChange:function(e){return B(pe({groupId:t,isActive:e}))}})]}),Object(a.jsxs)(lt,{children:[Object(a.jsx)(y.a,{onClick:function(){return g(!0)},endIcon:Object(a.jsx)(I.a,{}),variant:"contained",children:"Edit"}),Object(a.jsx)(y.a,{href:window.UNIQUE_COUPONS.api.preview.replace("preview-group-id",t),target:"_blank",rel:"noreferrer",endIcon:Object(a.jsx)(A.a,{}),variant:"contained",children:"Preview"})]})]}),Object(a.jsx)(z,{template:T,disabled:!0}),Object(a.jsx)(O.a,{variant:"h4",gutterBottom:!0,children:"Coupons"}),Object(a.jsx)(ut,{groupId:t,isFetching:d}),Object(a.jsx)(R,{component:s.b,to:"/add-coupons/".concat(t),Icon:_.a,children:"Add coupons to this group"})]})},bt=n(291),ht=n(274),ft=n(158),Ot=n.n(ft),gt=Object(x.a)(ht.a)((function(e){return{display:"flex",alignItems:"center",marginBottom:e.theme.spacing(1)}})),xt=Object(x.a)(Ot.a)((function(e){return{marginRight:e.theme.spacing(.5),marginTop:-2}})),mt=function(e){var t=e.to,n=e.children;return Object(a.jsxs)(gt,{component:s.b,to:t,variant:"body1",children:[Object(a.jsx)(xt,{}),n]})},vt=Object(x.a)("label")((function(e){return{display:"flex",marginBottom:e.theme.spacing(3),"& > *:first-child":{flexBasis:120,marginTop:15}}})),yt=function(e){var t=e.groupId,n=Object(p.c)((function(e){return ge(e,t)})),r=void 0!==n,o=Object(c.useState)(Date.now()),i=Object(j.a)(o,2),u=i[0],s=i[1],d=Object(c.useState)(""),l=Object(j.a)(d,2),h=l[0],f=l[1],g=Object(c.useState)(""),x=Object(j.a)(g,2),m=x[0],v=x[1],y=Object(c.useState)(!1),w=Object(j.a)(y,2),C=w[0],I=w[1],k=Object(p.b)(),A=Object(b.f)();if(!r)return Object(a.jsxs)(O.a,{variant:"body1",children:["There is no group with ID ",t]});var G=n.name;return Object(a.jsxs)("div",{children:[Object(a.jsxs)(mt,{to:"/group/".concat(t),children:['Back to Group "',G,'"']}),Object(a.jsxs)(O.a,{variant:"h3",gutterBottom:!0,children:['Add Coupons to Group "',G,'"']}),Object(a.jsxs)(vt,{children:[Object(a.jsx)(O.a,{children:"Expires at"}),Object(a.jsx)(D.a,{type:"date",valueAsNumber:u,autoFocus:!0,required:!0,variant:"outlined",onChange:function(e){return s(e.target.valueAsNumber)}})]}),Object(a.jsxs)(vt,{children:[Object(a.jsx)(O.a,{children:"Coupons"}),Object(a.jsx)(D.a,{value:h,multiline:!0,required:!0,variant:"outlined",rows:"4",rowsMax:"16",helperText:"One coupon per line",onChange:function(e){return f(e.target.value)}})]}),Object(a.jsx)(R,{Icon:_.a,isLoading:C,onClick:function(){if(h&&u){var e=h.split(/\r?\n/).map((function(e){return e.trim()})).filter((function(e){return""!==e})),n=new Date(u);n.setHours(23),n.setMinutes(59),n.setSeconds(59);var r=Math.floor(n.getTime()/1e3);I(!0),k(ie({couponValues:e,expiresAt:r,groupId:t})).then(S.e).then((function(){return A.push("/group/".concat(t))})).catch((function(e){var t=e.message;return v(t)})).finally((function(){return I(!1)}))}else v("Fill all inputs first.")},children:"Add coupons"}),Object(a.jsx)(bt.a,{open:!!m,autoHideDuration:6e3,message:m,onClose:function(e,t){return"clickaway"===t||v("")}})]})},wt=n(159),_t=n.n(wt),Ct=n(292),It=n(275),kt=n(276),At=n(278),St=n(277),Gt=Object(x.a)("div")({display:"flex",alignItems:"center",gap:"1em"}),Bt=Object(x.a)("h3")({margin:0}),qt=Object(x.a)("span")({fontStyle:"italic"}),Mt=Object(x.a)((function(e){return Object(a.jsx)(Ee.a,Object(v.a)(Object(v.a)({"aria-label":"delete group"},e),{},{children:Object(a.jsx)(_t.a,{})}))}))({marginLeft:"auto"}),Rt=Object(x.a)(Ct.a)((function(e){return{"& .MuiDialog-paper":{padding:e.theme.spacing(.5,1)}}})),Tt=function(e){var t=e.groupId,n=Object(p.c)((function(e){return ge(e,t)})),r=n.id,o=n.name,i=n.description,u=n.isActive,d=Object(c.useState)(!1),l=Object(j.a)(d,2),b=l[0],h=l[1],O=function(){return h(!1)},g=Object(p.b)();return Object(a.jsxs)(Gt,{children:[Object(a.jsx)(E.a,{checked:u,onChange:function(e){return function(e){return g(pe({groupId:t,isActive:e}))}(e.target.checked)},inputProps:{"aria-label":"toggle group activation"}}),Object(a.jsxs)(f.a,{children:[Object(a.jsx)(s.b,{to:"/group/".concat(r),children:Object(a.jsx)(Bt,{children:o})}),Object(a.jsx)(qt,{children:i})]}),Object(a.jsx)(Mt,{onClick:function(){return h(!0)}}),Object(a.jsxs)(Rt,{open:b,onClose:O,container:Qe,children:[Object(a.jsx)(It.a,{children:"Delete this coupon group?"}),Object(a.jsx)(kt.a,{children:Object(a.jsx)(St.a,{children:"This action can't be undone."})}),Object(a.jsxs)(At.a,{children:[Object(a.jsx)(y.a,{onClick:O,children:"Cancel"}),Object(a.jsx)(y.a,{color:"primary",onClick:function(){return g(de(t)).then(O)},children:"Delete"})]})]})]})},Et=function(){var e=Object(p.c)(xe);return Object(a.jsx)(h.a,{children:e.map((function(e){return Object(a.jsx)(Ae,{children:Object(a.jsx)(Tt,{groupId:e})},e)}))})},Dt=Object(x.a)((function(e){return Object(a.jsx)(R,Object(v.a)(Object(v.a)({component:s.b,to:"/add-coupon-group",Icon:_.a},e),{},{children:"Add a new coupon group"}))}))((function(e){return{marginTop:e.theme.spacing(3)}})),Nt=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Et,{}),Object(a.jsx)(Dt,{})]})},Ft=n(221),Pt=n(296),Lt=Object(x.a)("div")((function(e){var t=e.theme;return Object(m.a)({display:"flex",gap:t.spacing(.5,2)},t.breakpoints.down("xs"),{flexDirection:"column"})})),Vt=Object(x.a)(Pt.a)((function(e){var t=e.theme;return{width:"4rem",marginRight:t.spacing(1),"& .MuiOutlinedInput-input":{padding:t.spacing(1)}}})),zt=function(e){var t=e%60,n=(e=Math.floor(e/60))%60,r=(e=Math.floor(e/60))%24;return{days:e=Math.floor(e/24),hours:r,minutes:n,seconds:t}},Ut=function(e){return 60*(60*(24*e.days+e.hours)+e.minutes)+e.seconds},Ht=function(e){var t=e.value,n=e.onChange,r=zt(t),c=r.days,o=r.hours,i=r.minutes,u=r.seconds,s=function(e){return function(t){n(Ut(Object(m.a)({days:c,hours:o,minutes:i,seconds:u},e,Number(t.target.value))))}},p=function(e){return Object(a.jsxs)(Ft.a,{children:[Object(a.jsx)(Vt,{type:"number",value:r[e],onChange:s(e),inputProps:{min:0}}),e]})};return Object(a.jsxs)(Lt,{children:[p("days"),p("hours"),p("minutes"),p("seconds")]})},Jt=Object(x.a)("div")((function(e){return{display:"flex",alignItems:"center",gap:e.theme.spacing(2)}})),Wt=function(e){var t=e.label,n=e.value,r=e.handleChange;return Object(a.jsxs)(Qt,{children:[Object(a.jsx)(Yt,{children:t}),Object(a.jsx)(Ht,{value:n,onChange:r})]})},Qt=Object(x.a)(Ft.a)((function(e){var t=e.theme;return Object(m.a)({display:"flex",flexDirection:"column",gap:t.spacing(1,3),marginBottom:t.spacing(4)},t.breakpoints.up("md"),{flexDirection:"row",alignItems:"center"})})),Yt=Object(x.a)("span")((function(e){var t=e.theme;return Object(m.a)({display:"inline-block",lineHeight:1.5},t.breakpoints.up("md"),{width:300,textAlign:"right"})})),Xt=Object(x.a)(Pt.a)((function(e){return{width:"8rem","& .MuiOutlinedInput-input":{padding:e.theme.spacing(1)}}})),Kt=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!1),i=Object(j.a)(o,2),u=i[0],s=i[1],p=Object(c.useState)({}),d=Object(j.a)(p,2),l=d[0],b=d[1],h=function(e){return function(t){return b((function(n){return Object(v.a)(Object(v.a)({},n),{},Object(m.a)({},e,t))}))}};return Object(c.useEffect)((function(){ce.getOptions().then(b).finally((function(){return r(!1)}))}),[]),n?Object(a.jsxs)(Jt,{children:[Object(a.jsx)(g.a,{}),Object(a.jsx)(O.a,{children:"Loading settings"})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{variant:"h3",gutterBottom:!0,children:"Settings"}),Object(a.jsx)(Wt,{value:l.seconds_between_any_popup,handleChange:h("seconds_between_any_popup"),label:"Minimum time between any popups"}),Object(a.jsx)(Wt,{value:l.seconds_between_same_popup,handleChange:h("seconds_between_same_popup"),label:"Minimum time between popups of the same group"}),Object(a.jsx)(Wt,{value:l.seconds_between_any_retrieval,handleChange:h("seconds_between_any_retrieval"),label:"Minimum time between any coupon retrievals"}),Object(a.jsx)(Wt,{value:l.seconds_between_same_retrieval,handleChange:h("seconds_between_same_retrieval"),label:"Minimum time between retrievals of the same group"}),Object(a.jsx)(Wt,{value:l.seconds_valid_after_distribution,handleChange:h("seconds_valid_after_distribution"),label:"Minimum time of coupon validity"}),Object(a.jsx)(Wt,{value:l.seconds_from_page_load_to_popup,handleChange:h("seconds_from_page_load_to_popup"),label:"Time between page load and popup display"}),Object(a.jsxs)(Qt,{children:[Object(a.jsx)(Yt,{children:"Popup z-index"}),Object(a.jsx)(Xt,{type:"number",value:l.modal_z_index,onChange:function(e){return h("modal_z_index")(e.target.value)}})]}),Object(a.jsx)(R,{Icon:F.a,isLoading:u,onClick:function(){s(!0),ce.setOptions(l).finally((function(){return s(!1)}))},children:"Save options"})]})},Zt='\n<p style="text-align: center;">\n\tThis is some introduction text. It will be visible all the time. [shortcodes] are supported!\n</p>\n<p style="text-align: center;">\n\tText with functionality is highlighted with a dashed border around (which won\'t be shown to the user).\n\tHover above it to see which functionality it has.\n\tClicking the four buttons above the content will toggle the functionality for the selected text.\n</p>\n<p style="text-align: center;">\n\t<button class="unique-coupons-popup__button">Clicking this button will fetch the coupon.</button>\n</p>\n<div class="unique-coupons-popup__coupon" style="text-align: center;">\n  This area will be hidden, until the coupon was successfully fetched.\n  Make sure to have the value marked up somewhere, or your users won\'t be very happy. For example:\n\tYour coupon is <span class="unique-coupons-popup__value">value</span>\n  and expires at <span class="unique-coupons-popup__expires-at" style="white-space: nowrap;">date</span>.\n\t"value" and "date" will be replaced with the according data.\n</div>\n',$t=function(){var e=Object(p.b)(),t=Object(b.f)(),n=Object(c.useState)(""),r=Object(j.a)(n,2),o=r[0],i=r[1],u=Object(c.useState)(!1),s=Object(j.a)(u,2),d=s[0],l=s[1];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H,{initialValues:{name:"",description:"",template:Zt,isActive:!0},handleSubmit:function(n){n.name?(l(!0),e(oe(n)).then(S.e).then((function(e){var n=e.id;return t.push("/group/".concat(n))})).catch((function(e){var t=e.message;return i(t)})).finally((function(){return l(!1)}))):i("Name cannot be empty.")},submitButtonText:"Add this coupon group",isLoading:d}),Object(a.jsx)(bt.a,{open:!!o,autoHideDuration:6e3,message:o,onClose:function(e,t){return"clickaway"===t||i("")}})]})},en=function(e){var t=e.tabs;return Object(a.jsx)(Ce.a,{value:Object(b.g)().pathname,children:t.map((function(e,t){var n=e.path,r=e.label;return Object(a.jsx)(Ie.a,{label:r,component:s.b,to:n,value:n},n)}))})},tn=function(e){var t=e.children;return Object(a.jsx)(h.a,{children:Object(a.jsx)(f.a,{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",textAlign:"center",maxHeight:"80vh",height:700,children:t})})};var nn=Object(x.a)("div")({marginBottom:"80vh"}),rn=function(){var e=Object(c.useState)(!0),t=Object(j.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(""),i=Object(j.a)(o,2),u=i[0],s=i[1],d=Object(p.b)();return Object(c.useEffect)((function(){d(ue()).then(S.e).catch((function(e){var t=e.message;return s(t)})).finally((function(){return r(!1)}))}),[d]),Object(a.jsxs)(nn,{children:[Object(a.jsx)(en,{tabs:[{path:"/",label:"Groups"},{path:"/settings",label:"Settings"}]}),n||u?Object(a.jsx)(tn,{children:n?Object(a.jsx)(g.a,{size:80}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(O.a,{variant:"h3",gutterBottom:!0,children:"Error loading data"}),Object(a.jsx)(O.a,{variant:"body1",children:u})]})}):Object(a.jsx)(h.a,{children:Object(a.jsx)(f.a,{padding:3,children:Object(a.jsxs)(b.c,{children:[Object(a.jsx)(b.a,{exact:!0,path:"/settings",children:Object(a.jsx)(Kt,{})}),Object(a.jsx)(b.a,{exact:!0,path:"/group/:groupId",render:function(e){var t=e.match;return Object(a.jsx)(jt,{groupId:Number(t.params.groupId)})}}),Object(a.jsx)(b.a,{exact:!0,path:"/add-coupons/:groupId",render:function(e){var t=e.match;return Object(a.jsx)(yt,{groupId:Number(t.params.groupId)})}}),Object(a.jsx)(b.a,{exact:!0,path:"/add-coupon-group",children:Object(a.jsx)($t,{})}),Object(a.jsx)(b.a,{exact:!0,path:"/",children:Object(a.jsx)(Nt,{})}),Object(a.jsx)(b.a,{children:Object(a.jsx)("div",{children:"Invalid route"})})]})})})]})},an=Object(S.a)({reducer:{coupons:ye}});u.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(p.a,{store:an,children:Object(a.jsx)(l.b,{jss:Xe,children:Object(a.jsx)(s.a,{children:Object(a.jsx)(d.a,{children:Object(a.jsx)(rn,{})})})})})}),Qe)}},[[218,1,2]]]);
//# sourceMappingURL=main.08be74a2.chunk.js.map